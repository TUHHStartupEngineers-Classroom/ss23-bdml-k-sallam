{
  "hash": "83fb73f06fc23e17cc6154f0ddef35a9",
  "result": {
    "markdown": "---\ntitle: \"03 Automated Machine Learning with H20\"\ndate: '2023-06-08'\noutput:\n  html_document:\n    toc: true\n    toc_float: true\n    df_print: paged\n    collapsed: false\n    number_sections: true\n    toc_depth: 3\n    code_folding: hide\n---\n\n\n\n\n# Automated Machine Learning with H20 (I) Challenge\n\n\n## Loading libraries\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-1_5b6ace048e5d6bd9e7d5536d56c38d78'}\n\n```{.r .cell-code}\nlibrary(h2o)\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(skimr)\nlibrary(GGally)\nlibrary(ggplot2)\nlibrary(rmarkdown)\nlibrary(rsample)\nlibrary(recipes)\nlibrary(PerformanceAnalytics)\n```\n:::\n\n\n\n## Q1:\n\nThe answer is C\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-2_f2b5b5dff442d2c54817fb0a596bfd9d'}\n\n```{.r .cell-code}\n#Q1\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"income\")) %>%\n  plot_ggpairs(Attrition)\n#The answer is C\n```\n:::\n\n\n\n## Q2:\n\nThe answer is D\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-3_e6b8faea568ef59de17da144b5c70607'}\n\n```{.r .cell-code}\n#Q2\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"PercentSalaryHike\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is D\n```\n:::\n\n\n\n## Q3\n\nThe answer is B\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-4_635289e039dae43c295c431e52594753'}\n\n```{.r .cell-code}\n#Q3\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"StockOptionLevel\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is B\n```\n:::\n\n\n## Q4\n\nThe answer is A\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-5_fd18150ee880527f9feb5315d7e0f916'}\n\n```{.r .cell-code}\n#Q4\n\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"EnvironmentSatisfaction\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is A\n```\n:::\n\n\n## Q5\n\nThe answer is B\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-6_d917097adbc4a087ff40eeea1d9a3007'}\n\n```{.r .cell-code}\n#Q5\n\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"WorkLifeBalance\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is B\n```\n:::\n\n\n## Q6\n\nThe answer is A\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-7_3a86cc4873e982e1523dd3d08fafb9fe'}\n\n```{.r .cell-code}\n#Q6\n\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"JobInvolvement\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is A\n```\n:::\n\n\n## Q7\n\nThe answer is B\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-8_d99bf712e745f13f61cd269e08048a8a'}\n\n```{.r .cell-code}\n#Q7\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"OverTime\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is B\n```\n:::\n\n\n## Q8\n\nThe answer is B\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-9_7f8b5f11038bd5da513ea4d66265d9bf'}\n\n```{.r .cell-code}\n#Q8\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"TrainingTimesLastYear\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is B\n```\n:::\n\n\n## Q9\n The answer is B\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-10_184e64908670424945ce255ef221e742'}\n\n```{.r .cell-code}\n#Q9\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"YearsAtCompany\")) %>%\n  plot_ggpairs(Attrition)\n#The answer is B\n```\n:::\n\n\n## Q10\n\nThe answer is C\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-11_2bc221128b44900e2d1e247bbb69c6f9'}\n\n```{.r .cell-code}\n#Q 10\nemployee_attrition_tbl %>%\n  select(Attrition, contains(\"YearsSinceLastPromotion\")) %>%\n  plot_ggpairs(Attrition)\n\n#The answer is C\n```\n:::\n\n\n\n# Automated Machine Learning with H20 (II) Challenge\n\n\n## Loading data\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-12_b28800290797c9710e6f50611a189df5'}\n\n```{.r .cell-code}\nproduct_backorders_tbl <- read_csv(\"product_backorders.csv\")\n```\n:::\n\n\n\n\n## Split into test and train\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-13_931ce8b03a50b3795445de726d83dc59'}\n\n```{.r .cell-code}\nset.seed(seed = 1113)\nsplit_obj <- rsample::initial_split(product_backorders_tbl, prop = 0.85)\n```\n:::\n\n\n\n## Assign training and test data\n\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-14_5f62025123644f416488e09853180f3a'}\n\n```{.r .cell-code}\ntrain_readable_tbl<- training(split_obj)\ntest_readable_tbl <- testing(split_obj)\n\n\n  recipe_obj <- recipe( went_on_backorder~., data = train_readable_tbl) %>%\n  step_zv(all_predictors()) %>%\n  prep()\n\ntrain_tbl <- bake(recipe_obj, new_data = train_readable_tbl)\ntest_tbl  <- bake(recipe_obj, new_data = test_readable_tbl)\n\n #set the predictor names\n predictors <- c(\"national_inv\", \"lead_time\", \"forecast_3_month\", \"sales_3_month\")\n```\n:::\n\n\n\n## specify the response\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-15_350cfe6646b68c02161da738c0f64947'}\n\n```{.r .cell-code}\n response <- \"went_on_backorder\"\n```\n:::\n\n\n## Automated machine learning Model\n\n### Initiate H2O\n\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-16_9ea1f568d6e87ede65115812c5556013'}\n\n```{.r .cell-code}\nh2o.init()\n```\n:::\n\n\n\n### Split data into a training and a validation data frame\n\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-17_17ed39b08ed15099a1dfbd10ea05d038'}\n\n```{.r .cell-code}\n# Setting the seed is just for reproducability\n split_h2o <- h2o.splitFrame(as.h2o(train_tbl), ratios = c(0.85), seed = 1234)\n train_h2o <- split_h2o[[1]]\n valid_h2o <- split_h2o[[2]]\n test_h2o  <- as.h2o(test_tbl)\n```\n:::\n\n\n\n\n### Set the target and predictors\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-18_4074422a4cff0086fad4bb78145bef9c'}\n\n```{.r .cell-code}\n y <- response\n x <- setdiff(names(train_h2o), y)\n```\n:::\n\n\n### Predicting using Leader Model\n\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-19_d01f2a89d8d81cf946cc95fd243731a3'}\n\n```{.r .cell-code}\n ?h2o.automl\n\n automl_models_h2o <- h2o.automl(\n   x = x,\n   y = y,\n   training_frame    = train_h2o,\n   validation_frame  = valid_h2o,\n   leaderboard_frame = test_h2o,\n   max_runtime_secs  = 15,\n   nfolds            = 5\n )\n automl_models_h2o@leaderboard\n\n\n Model<-automl_models_h2o@leader\n```\n:::\n\n\n\n### Saving The Leader Model\n\n\n::: {.cell hash='03_ml_aut_cache/html/unnamed-chunk-20_9d680e1f2248120199dd65aaf692a9f6'}\n\n```{.r .cell-code}\nh2o.saveModel(Model,path = \"ml_journal-KhaledSallam\")\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}